<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>图书管理</title>
    <script>
        async function getAllBooks() {
            const res = await fetch("/book");
            const data = await res.json();
            document.getElementById("book-list").innerText = JSON.stringify(data);
        }

        async function searchBook() {
            const book = {
                bookName: document.getElementById("search-name").value,
                author: document.getElementById("search-author").value,
                genre: document.getElementById("search-genre").value
            };

            const res = await fetch("/book/search", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(book)
            });

            const data = await res.json();
            document.getElementById("book-list").innerText = JSON.stringify(data);
        }

        async function addBook() {
            const book = {
                bookName: document.getElementById("add-name").value,
                bookPre: document.getElementById("add-pre").value,
                author: document.getElementById("add-author").value,
                publisher: document.getElementById("add-publisher").value,
                genre: document.getElementById("add-genre").value,
                bookImg: document.getElementById("add-img").value,
                bookUrl: document.getElementById("add-url").value
            };

            const res = await fetch("/book/add", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(book)
            });

            const data = await res.json();
            alert(JSON.stringify(data));
        }

        async function updateBook() {
            const book = {
                bookId: document.getElementById("update-id").value,
                bookName: document.getElementById("update-name").value,
                bookPre: document.getElementById("update-pre").value,
                author: document.getElementById("update-author").value,
                publisher: document.getElementById("update-publisher").value,
                genre: document.getElementById("update-genre").value,
                bookImg: document.getElementById("update-img").value,
                bookUrl: document.getElementById("update-url").value
            };

            const res = await fetch("/book", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(book)
            });

            const data = await res.json();
            alert(JSON.stringify(data));
        }

        async function deleteBook() {
            const id = document.getElementById("delete-id").value;

            const res = await fetch("/book/" + id, {
                method: "DELETE"
            });

            const data = await res.json();
            alert(JSON.stringify(data));
        }
    </script>
</head>
<body>
<h2>查询所有图书</h2>
<button onclick="getAllBooks()">查询全部</button>

<h2>多条件查询</h2>
书名：<input id="search-name"><br>
作者：<input id="search-author"><br>
类别：<input id="search-genre"><br>
<button onclick="searchBook()">搜索</button>

<h2>添加图书</h2>
书名：<input id="add-name"><br>
简介：<input id="add-pre"><br>
作者：<input id="add-author"><br>
出版社：<input id="add-publisher"><br>
类别：<input id="add-genre"><br>
封面图片地址：<input id="add-img"><br>
图书链接：<input id="add-url"><br>
<button onclick="addBook()">添加</button>

<h2>修改图书</h2>
ID：<input id="update-id"><br>
书名：<input id="update-name"><br>
简介：<input id="update-pre"><br>
作者：<input id="update-author"><br>
出版社：<input id="update-publisher"><br>
类别：<input id="update-genre"><br>
封面图片地址：<input id="update-img"><br>
图书链接：<input id="update-url"><br>
<button onclick="updateBook()">更新</button>

<h2>删除图书</h2>
图书ID：<input id="delete-id"><br>
<button onclick="deleteBook()">删除</button>

<hr>
<h3>返回结果：</h3>
<pre id="book-list"></pre>
</body>
</html>